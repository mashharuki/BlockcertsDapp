import getImageSize from '../../../src/helpers/getImageSize';
import { TElementSize } from '../../../src/helpers/getHTMLElementSize';

class MockImage {
  width;
  height;
  // eslint-disable-next-line @typescript-eslint/no-empty-function
  onload () {}

  constructor () {
    setTimeout(() => {
      this.width = 100;
      this.height = 100;
      this.onload();
    }, 100);
  }
}

describe('getImageSize function', function () {
  beforeEach(function () {
    window.Image = MockImage as any;
  });

  it('should return the image width and height values', async function () {
    const fixtureImage = 'data:image/png;base64,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';
    const size: TElementSize = await getImageSize(fixtureImage);
    expect(size).toEqual({
      width: 100,
      height: 100
    });
  });
});
